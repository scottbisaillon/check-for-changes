{"version":3,"sources":["../webpack:/check-for-changes/src/index.ts","../webpack:/check-for-changes/src/lib/get-inputs.ts","../webpack:/check-for-changes/src/lib/index.ts","../webpack:/check-for-changes/webpack/bootstrap","../webpack:/check-for-changes/webpack/startup"],"names":["__awaiter","this","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__importDefault","mod","__esModule","default","Object","defineProperty","exports","lib_1","__webpack_require__","__createBinding","create","o","m","k","k2","undefined","enumerable","get","__setModuleDefault","v","__importStar","prototype","hasOwnProperty","call","core","INPUT_FILES_GLOB","getInputs","filesGlob","getInput","minimatch_1","path_1","simple_git_1","get_inputs_1","baseDir","join","process","cwd","git","checkIfFilesChanged","debug","config","JSON","stringify","tags","all","length","setOutput","previousTag","latest","diffResult","diffSummary","files","map","file","changed","match","__webpack_module_cache__","moduleId","cachedModule","module","threw","__webpack_modules__","__webpack_exports__"],"mappings":"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","file":"index.js","sourcesContent":["\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst lib_1 = __importDefault(require(\"./lib\"));\r\n(() => __awaiter(void 0, void 0, void 0, function* () {\r\n    yield (0, lib_1.default)();\r\n}))();\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst core = __importStar(require(\"@actions/core\"));\r\nconst INPUT_FILES_GLOB = 'filesGlob';\r\nfunction getInputs() {\r\n    let filesGlob = core.getInput(INPUT_FILES_GLOB);\r\n    if (filesGlob === undefined || filesGlob === '')\r\n        filesGlob = '**';\r\n    return {\r\n        filesGlob\r\n    };\r\n}\r\nexports.default = getInputs;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst core = __importStar(require(\"@actions/core\"));\r\nconst minimatch_1 = __importDefault(require(\"minimatch\"));\r\nconst path_1 = __importDefault(require(\"path\"));\r\nconst simple_git_1 = __importDefault(require(\"simple-git\"));\r\nconst get_inputs_1 = __importDefault(require(\"./get-inputs\"));\r\nconst baseDir = path_1.default.join(process.cwd());\r\nconst git = (0, simple_git_1.default)({ baseDir });\r\nfunction checkIfFilesChanged() {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        core.debug(`running in ${baseDir}`);\r\n        const config = (0, get_inputs_1.default)();\r\n        core.debug(`inputs: ${JSON.stringify(config)}`);\r\n        const result = yield git.tags();\r\n        core.debug(`tags: ${JSON.stringify(result)}`);\r\n        if (result.all.length === 0) {\r\n            core.debug('no tags found, setting changes=true');\r\n            core.setOutput('first_tag', true);\r\n            core.setOutput('changes', true);\r\n        }\r\n        else {\r\n            const previousTag = result.latest;\r\n            const diffResult = yield git.diffSummary(`${previousTag}`);\r\n            core.debug(`diffResult: ${JSON.stringify(diffResult)}`);\r\n            const files = diffResult.files.map(v => v.file);\r\n            core.debug(`changed files: [${files.join(', ')}]`);\r\n            const changed = minimatch_1.default.match(files, config.filesGlob).length > 0;\r\n            core.debug(`setting changes=${changed}`);\r\n            core.setOutput('changes', changed);\r\n        }\r\n    });\r\n}\r\nexports.default = checkIfFilesChanged;\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\tvar threw = true;\n\ttry {\n\t\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\t\tthrew = false;\n\t} finally {\n\t\tif(threw) delete __webpack_module_cache__[moduleId];\n\t}\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(144);\n"]}